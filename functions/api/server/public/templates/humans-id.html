<!DOCTYPE html>
<html lang="en" class="h-full antialiased">
  <head>
    <title>{{ .Human.Name }} | AsianAmericans.wiki</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link href="/output.css?v=2" rel="stylesheet" />
    <script src="/1.9.10.htmx.min.js"></script>

    {{ template "dark-mode.html" . }}

    <meta name="description" content="{{ .Human.Description }}" />

    <!-- Facebook Meta Tags -->
    <meta
      property="og:url"
      content="https://asianamericans.wiki/humans/{{ .Human.Path }}"
    />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="{{ .Human.Name }}" />
    <meta property="og:description" content="{{ .Human.Description }}" />
    <meta property="og:image" content="{{ .Human.Images.Thumbnail }}" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://asianamericans.wiki/humans/{{ .Human.Path }}"
    />
    <meta name="twitter:title" content="{{ .Human.Name }}" />
    <meta name="twitter:description" content="{{ .Human.Description }}" />
    <meta name="twitter:image" content="{{ .Human.Images.Thumbnail }}" />
  </head>
  <body
    class="flex flex-col min-h-screen bg-[var(--color-background)] text-[var(--color-text)] font-body"
  >
    {{ template "header.html" . }}

    <main class="flex-grow w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      
      <div class="lg:grid lg:grid-cols-12 lg:gap-8">
        
        <!-- Sidebar (Image + Stats) -->
        <aside class="lg:col-span-4 space-y-6">
           <!-- Image Card -->
          <div class="bg-[var(--color-card-bg)] rounded-2xl shadow-lg border border-[var(--color-border)] overflow-hidden p-2">
            {{ if .Human.Images.Featured }}
              <img
                class="w-full h-auto rounded-xl object-cover aspect-[3/4]"
                src="{{ .Human.Images.Featured }}"
                alt="A photo of {{ .Human.Name }}"
              />
            {{ else }}
               <div class="w-full h-96 flex items-center justify-center bg-gray-200 dark:bg-gray-800 rounded-xl text-[var(--color-text-secondary)]">
                <span class="text-6xl opacity-20">?</span>
              </div>
            {{ end }}
          </div>

          <!-- Quick Stats / Socials -->
          <div class="bg-[var(--color-card-bg)] rounded-2xl shadow-sm border border-[var(--color-border)] p-6 space-y-4">
            
             <!-- Social Links -->
            {{ if or (.Human.Socials.X) (.Human.Socials.IMDB) (.Human.Socials.Website) (.Human.Socials.Instagram) }}
            <div class="flex justify-center gap-4 py-2 border-b border-[var(--color-border)]">
               {{ if .Human.Socials.X }}
              <a target="_blank" href="{{ .Human.Socials.X }}" class="text-[var(--color-text-secondary)] hover:text-[var(--color-text)] transition-colors">
                <span class="sr-only">X (Twitter)</span>
                <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 512 512"><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
              </a>
              {{ end }}
              
              {{ if .Human.Socials.Instagram }}
              <a target="_blank" href="{{ .Human.Socials.Instagram }}" class="text-[var(--color-text-secondary)] hover:text-[#E4405F] transition-colors">
                 <span class="sr-only">Instagram</span>
                 <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 448 512"><path d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"/></svg>
              </a>
              {{ end }}

              {{ if .Human.Socials.Website }}
              <a target="_blank" href="{{ .Human.Socials.Website }}" class="text-[var(--color-text-secondary)] hover:text-[var(--color-primary)] transition-colors">
                  <span class="sr-only">Website</span>
                  <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 576 512"><path d="M575.8 255.5c0 18-15 32.1-32 32.1h-32l.7 160.2c0 2.7-.2 5.4-.5 8.1V472c0 22.1-17.9 40-40 40H456c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1H416 392c-22.1 0-40-17.9-40-40V448 384c0-17.7-14.3-32-32-32H256c-17.7 0-32 14.3-32 32v64 24c0 22.1-17.9 40-40 40H160 128.1c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2H104c-22.1 0-40-17.9-40-40V360c0-.9 0-1.9 .1-2.8V287.6H32c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"/></svg>
              </a>
              {{ end }}

              {{ if .Human.Socials.IMDB }}
               <a target="_blank" href="{{ .Human.Socials.IMDB }}" class="text-[var(--color-text-secondary)] hover:text-[#F5C518] transition-colors">
                  <span class="sr-only">IMDB</span>
                  <svg class="h-6 w-8" fill="currentColor" viewBox="0 0 448 512"><path d="M89.5 323.6H53.93V186.2H89.5V323.6zM156.1 250.5L165.2 186.2H211.5V323.6H180.5V230.9L167.1 323.6H145.8L132.8 232.9L132.7 323.6H101.5V186.2H147.6C148.1 194.5 150.4 204.3 151.9 215.6L156.1 250.5zM223.7 323.6V186.2H250.3C267.3 186.2 277.3 187.1 283.3 188.6C289.4 190.3 294 192.8 297.2 196.5C300.3 199.8 302.3 203.1 303 208.5C303.9 212.9 304.4 221.6 304.4 234.7V282.9C304.4 295.2 303.7 303.4 302.5 307.6C301.4 311.7 299.4 315 296.5 317.3C293.7 319.7 290.1 321.4 285.8 322.3C281.6 323.1 275.2 323.6 266.7 323.6H223.7zM259.2 209.7V299.1C264.3 299.1 267.5 298.1 268.6 296.8C269.7 294.8 270.4 289.2 270.4 280.1V226.8C270.4 220.6 270.3 216.6 269.7 214.8C269.4 213 268.5 211.8 267.1 210.1C265.7 210.1 263 209.7 259.2 209.7V209.7zM316.5 323.6V186.2H350.6V230.1C353.5 227.7 356.7 225.2 360.1 223.5C363.7 222 368.9 221.1 372.9 221.1C377.7 221.1 381.8 221.9 385.2 223.3C388.6 224.8 391.2 226.8 393.2 229.5C394.9 232.1 395.9 234.8 396.3 237.3C396.7 239.9 396.1 245.3 396.1 253.5V292.1C396.1 300.3 396.3 306.4 395.3 310.5C394.2 314.5 391.5 318.1 387.5 320.1C383.4 324 378.6 325.4 372.9 325.4C368.9 325.4 363.7 324.5 360.2 322.9C356.7 321.1 353.5 318.4 350.6 314.9L348.5 323.6L316.5 323.6zM361.6 302.9C362.3 301.1 362.6 296.9 362.6 290.4V255C362.6 249.4 362.3 245.5 361.5 243.8C360.8 241.9 357.8 241.1 355.7 241.1C353.7 241.1 352.3 241.9 351.6 243.4C351 244.9 350.6 248.8 350.6 255V291.4C350.6 297.5 351 301.4 351.8 303C352.4 304.7 353.9 305.5 355.9 305.5C358.1 305.5 360.1 304.7 361.6 302.9L361.6 302.9zM418.4 32.04C434.1 33.27 447.1 47.28 447.1 63.92V448.1C447.1 464.5 435.2 478.5 418.9 479.1C418.6 479.1 418.4 480 418.1 480H29.88C29.6 480 29.32 479.1 29.04 479.9C13.31 478.5 1.093 466.1 0 449.7L.0186 61.78C1.081 45.88 13.82 33.09 30.26 31.1H417.7C417.9 31.1 418.2 32.01 418.4 32.04L418.4 32.04zM30.27 41.26C19 42.01 10.02 51.01 9.257 62.4V449.7C9.63 455.1 11.91 460.2 15.7 464C19.48 467.9 24.51 470.3 29.89 470.7H418.1C429.6 469.7 438.7 459.1 438.7 448.1V63.91C438.7 58.17 436.6 52.65 432.7 48.45C428.8 44.25 423.8 41.67 418.4 41.26L30.27 41.26z"/></svg>
               </a>
              {{ end }}
            </div>
            {{ end }}

            {{ if .Human.CurrentAge }}
            <div>
               <h3 class="text-sm font-semibold text-[var(--color-text-secondary)] uppercase tracking-wider">Age</h3>
               <p class="text-lg font-medium text-[var(--color-text)]">{{ .Human.CurrentAge }}</p>
            </div>
            {{ end }}

             <div>
               <h3 class="text-sm font-semibold text-[var(--color-text-secondary)] uppercase tracking-wider mb-2">Ethnicity</h3>
               <div class="flex flex-wrap gap-2">
                 {{ range .Human.Ethnicity }}
                    <a href="/humans?ethnicity={{ . }}" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[var(--color-background)] text-[var(--color-text)] border border-[var(--color-border)] hover:bg-[var(--color-border)] transition-colors">
                      {{ . }}
                    </a>
                 {{ end }}
               </div>
            </div>

            <div>
               <h3 class="text-sm font-semibold text-[var(--color-text-secondary)] uppercase tracking-wider mb-2">Tags</h3>
               <div class="flex flex-wrap gap-2">
                 {{ range .Human.Tags }}
                    <a href="/humans?tag={{ . }}" class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-[var(--color-primary)]/10 text-[var(--color-primary)] border border-transparent hover:bg-[var(--color-primary)]/20 transition-colors">
                      {{ . }}
                    </a>
                 {{ end }}
               </div>
            </div>

            {{ if .Admin }}
             <div class="pt-4 border-t border-[var(--color-border)] flex flex-col gap-2">
                {{ if .Human.Draft }}
                <button
                  hx-post="/humans/{{ .Human.Path }}/publish"
                  class="w-full bg-[var(--color-primary)] text-white font-medium py-2 rounded-lg hover:bg-[var(--color-primary-hover)] transition-colors"
                >
                  Publish Draft
                </button>
                {{ end }}
                <a
                  href="/humans/{{ .Human.Path }}/edit"
                  class="w-full bg-[var(--color-background)] text-[var(--color-text)] font-medium py-2 rounded-lg border border-[var(--color-border)] text-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                >
                  Edit Human
                </a>
                <a
                  href="/admin/xai/human/{{ .Human.ID }}"
                  class="w-full bg-[var(--color-background)] text-[var(--color-text)] font-medium py-2 rounded-lg border border-[var(--color-border)] text-center hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"
                >
                  Generate xAI Images
                </a>
             </div>
            {{ end }}

          </div>
        </aside>

        <!-- Main Content -->
        <article class="mt-8 lg:mt-0 lg:col-span-8">
           <div class="bg-[var(--color-card-bg)] rounded-2xl shadow-sm border border-[var(--color-border)] p-8">
              <header class="mb-8">
                <h1 class="text-4xl sm:text-5xl font-extrabold text-[var(--color-text)] font-heading mb-2">
                  {{ .Human.Name }}
                  <span class="text-2xl text-[var(--color-text-secondary)] align-middle ml-2" title="{{ .Human.Gender }}">
                    {{ if eq .Human.Gender "male" }} ♂️ {{ else if eq .Human.Gender "female" }} ♀️ {{ end }}
                  </span>
                </h1>
              </header>

              <div class="prose prose-lg dark:prose-invert max-w-none text-[var(--color-text-secondary)] leading-relaxed">
                 <p>{{ .Human.Description }}</p>
              </div>
           </div>

           <!-- Similar Humans Section -->
           {{ template "similar.html" . }}

        </article>

      </div>
    </main>

    {{ template "footer.html" . }}
  </body>
</html>